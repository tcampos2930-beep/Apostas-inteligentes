<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Apostas Inteligentes</title>
<style>
  :root{--accent:#0b84ff;--bg:#071126;--muted:#9fb3c8}
  body{margin:0;font-family:Inter,Arial;background:var(--bg);color:#eaf2ff;min-height:100vh}
  header{padding:18px;display:flex;align-items:center;justify-content:space-between;border-bottom:1px solid rgba(255,255,255,0.03)}
  .brand{display:flex;gap:12px;align-items:center}
  .logo{width:46px;height:46px;border-radius:10px;background:linear-gradient(135deg,var(--accent),#6de0ff);display:flex;align-items:center;justify-content:center;font-weight:700;color:#042233}
  nav a{color:var(--muted);margin-left:12px;text-decoration:none;cursor:pointer}
  main{padding:20px;max-width:980px;margin:0 auto}
  .card{background:rgba(255,255,255,0.03);padding:16px;border-radius:12px;margin-bottom:12px}
  .flex{display:flex;gap:12px}
  input,select,button{padding:10px;border-radius:8px;border:none}
  button{background:var(--accent);color:#012;font-weight:700;cursor:pointer}
  footer{padding:18px;text-align:center;color:var(--muted);font-size:13px}
  @media(max-width:720px){.flex{flex-direction:column}}
</style>
</head>
<body>
<header>
  <div class="brand"><div class="logo">AI</div><div><strong>Apostas Inteligentes</strong><div style="color:var(--muted);font-size:13px">Aprenda. Analise. Aposte melhor.</div></div></div>
  <nav>
    <a onclick="nav('home')">Início</a><a onclick="nav('analysis')">Análises</a><a onclick="nav('simulator')">Simulador</a><a onclick="nav('learn')">Central</a>
  </nav>
</header>
<main id="app">
  <section id="home" class="card">
    <h2>Bem-vindo ao Apostas Inteligentes</h2>
    <p style="color:var(--muted)">Ferramenta educativa com análises demonstrativas. Cadastre seu e-mail para receber acesso antecipado.</p>
    <div style="margin-top:12px" class="flex">
      <input id="leadEmail" type="email" placeholder="Seu melhor e-mail">
      <button onclick="submitLead()">Quero acesso antecipado</button>
    </div>
    <div id="leadMsg" style="margin-top:8px;color:var(--muted)"></div>
  </section>

  <section id="analysis" class="card" style="display:none">
    <h3>Análises</h3>
    <p style="color:var(--muted)">Análises automáticas (demo). Clique para carregar uma sugestão.</p>
    <button onclick="loadAnalysis()">Carregar análise demo</button>
    <div id="analysisBox" style="margin-top:12px;color:var(--muted)"></div>
  </section>

  <section id="simulator" class="card" style="display:none">
    <h3>Simulador de apostas</h3>
    <p style="color:var(--muted)">Simule stake e odds para ver retorno potencial.</p>
    <div class="flex" style="margin-top:8px">
      <input id="stake" type="number" placeholder="Stake (R$)" value="10">
      <input id="odds" type="number" step="0.01" placeholder="Odds" value="2.1">
      <button onclick="simulate()">Simular</button>
    </div>
    <div id="simResult" style="margin-top:10px;color:var(--muted)"></div>
  </section>

  <section id="learn" class="card" style="display:none">
    <h3>Central do Apostador Iniciante</h3>
    <ol style="color:var(--muted)">
      <li>Gerencie sua banca — defina uma stake fixa percentual.</li>
      <li>Procure value bets — compare odds com probabilidade implícita.</li>
      <li>Evite apostar por emoções — use simulações.</li>
    </ol>
  </section>
</main>
<footer>© 2025 Apostas Inteligentes — Projeto demonstrativo</footer>

<script>
function nav(id){
  document.querySelectorAll('main section').forEach(s=>s.style.display='none');
  document.getElementById(id).style.display='block';
  window.scrollTo(0,0);
}

async function submitLead(){
  const email = document.getElementById('leadEmail').value.trim();
  const msg = document.getElementById('leadMsg');
  if(!email){msg.textContent='Insira um e-mail válido.';return;}
  msg.textContent='Enviando...';
  try{
    const res = await fetch('/api/leads',{
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body:JSON.stringify({email})
    });
    const data = await res.json();
    if(data.success){msg.textContent='Obrigado! Você foi cadastrado.';}
    else msg.textContent='Erro: '+(data.error||data.message||'Falha.');
  }catch(e){
    msg.textContent='Erro de conexão.';
  }
}

async function loadAnalysis(){
  const box = document.getElementById('analysisBox');
  box.textContent='Carregando...';
  try{
    const res = await fetch('/api/analysis');
    const data = await res.json();
    box.innerHTML = data.picks.map(p=>`<div style="margin-bottom:8px"><strong>${p.market}:</strong> ${p.suggestion} (confiança ${Math.round(p.probability*100)}%)<div style="color:var(--muted)">${p.reasoning}</div></div>`).join('');
  }catch(e){
    box.textContent='Erro ao carregar análise.';
  }
}

async function simulate(){
  const stake = parseFloat(document.getElementById('stake').value);
  const odds = parseFloat(document.getElementById('odds').value);
  const resBox = document.getElementById('simResult');
  resBox.textContent='Simulando...';
  try{
    const res = await fetch('/api/simulate',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({stake,odds})});
    const data = await res.json();
    resBox.textContent = `Retorno potencial: R$ ${Number(data.potential).toFixed(2)}`;
  }catch(e){
    resBox.textContent='Erro na simulação.';
  }
}
</script>
</body>
</html>
